<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–µ—Ä–∞–º–∏ ¬∑ –£–¥–∞–ª–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='modern_style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='toast.css') }}">
</head>
<body>
    <div class="app-shell">
        {% set active_page = 'remote_admin' %}
        {% include '_primary_nav.html' %}

        <section class="glass-panel" style="margin: 2rem auto; max-width: 1000px;">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <a href="{{ url_for('remote_admin.dashboard') }}" class="neo-button ghost" style="text-decoration: none;">
                        ‚Üê –ö —É–¥–∞–ª–µ–Ω–Ω–æ–π –∞–¥–º–∏–Ω–∫–µ
                    </a>
                    <div>
                        <h1 style="margin: 0;">–¢–µ—Å—Ç–µ—Ä—ã (Tester Entities)</h1>
                        <p style="color: var(--text-muted); margin: 0.5rem 0 0 0;">
                            –û–∫—Ä—É–∂–µ–Ω–∏–µ: <strong>{{ environment_name }}</strong>
                        </p>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 300px; gap: 2rem;">
                {# –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–µ—Ä–æ–≤ #}
                <div>
                    {% if testers %}
                    <table class="neo-table" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>–ò–º—è</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–°–æ–∑–¥–∞–Ω</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for tester in testers %}
                            <tr>
                                <td><strong>{{ tester.name }}</strong></td>
                                <td>
                                    {% if tester.is_active %}
                                    <span style="color: #2eff7d;">‚óè –ê–∫—Ç–∏–≤–µ–Ω</span>
                                    {% else %}
                                    <span style="color: var(--text-muted);">‚óè –ù–µ–∞–∫—Ç–∏–≤–µ–Ω</span>
                                    {% endif %}
                                </td>
                                <td>{{ tester.created_at[:10] if tester.created_at else '‚Äî' }}</td>
                                <td>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <form method="POST" action="{{ url_for('remote_admin.tester_toggle', tester_id=tester.id) }}">
                                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                            <input type="hidden" name="is_active" value="{{ 'false' if tester.is_active else 'true' }}">
                                            <button type="submit" class="neo-button ghost small" title="{{ '–û—Ç–∫–ª—é—á–∏—Ç—å' if tester.is_active else '–í–∫–ª—é—á–∏—Ç—å' }}">
                                                {{ '‚õî' if tester.is_active else '‚úÖ' }}
                                            </button>
                                        </form>
                                        
                                        <form method="POST" action="{{ url_for('remote_admin.tester_delete', tester_id=tester.id) }}" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–µ—Ä–∞ {{ tester.name }}?');">
                                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                            <button type="submit" class="neo-button danger small" title="–£–¥–∞–ª–∏—Ç—å">
                                                üóëÔ∏è
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <div style="text-align: center; padding: 3rem; background: var(--surface-2); border-radius: var(--radius-md); color: var(--text-muted);">
                        –¢–µ—Å—Ç–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
                    </div>
                    {% endif %}
                </div>

                {# –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è #}
                <div class="glass-panel" style="background: var(--surface-2); height: fit-content; padding: 1.5rem;">
                    <h3 style="margin-top: 0;">–ù–æ–≤—ã–π —Ç–µ—Å—Ç–µ—Ä</h3>
                    <form method="POST" action="{{ url_for('remote_admin.testers') }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        
                        <div class="neo-field">
                            <label class="neo-label">–ò–º—è</label>
                            <input type="text" name="name" class="neo-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¢–µ—Å—Ç–æ–≤–∞—è —à–∫–æ–ª–∞ ‚Ññ1" required>
                        </div>

                        <div class="neo-field" style="align-items: flex-start;">
                            <label class="neo-label">–°—Ç–∞—Ç—É—Å</label>
                            <label style="display:flex; gap:0.6rem; align-items:center; color: var(--text-primary);">
                                <input type="checkbox" name="is_active" checked>
                                <span style="color: var(--text-muted);">–ê–∫—Ç–∏–≤–µ–Ω —Å—Ä–∞–∑—É</span>
                            </label>
                        </div>

                        <button type="submit" class="neo-button full-width">–°–æ–∑–¥–∞—Ç—å</button>
                    </form>
                    
                    <div style="margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-muted);">
                        <p><strong>–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?</strong></p>
                        <p>–¢–µ—Å—Ç–µ—Ä—ã (Tester Entities) ‚Äî —ç—Ç–æ —Å—É—â–Ω–æ—Å—Ç–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Sandbox.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <script src="{{ url_for('static', filename='toast.js') }}"></script>
</body>
</html>
