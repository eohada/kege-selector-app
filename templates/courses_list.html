<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö—É—Ä—Å—ã ¬∑ {{ student.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='modern_style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='toast.css') }}">
    {% include '_ux_enhancements.html' %}
    {% if csrf_token %}
    <meta name="csrf-token" content="{{ csrf_token() }}">
    {% endif %}
</head>
<body>
    <div class="app-shell">
        {% set active_page = 'students' %}
        {% include '_primary_nav.html' %}

        <main style="margin-top: 1.25rem;">
            <div class="page-header" style="display:flex; justify-content: space-between; align-items: flex-end; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;">
                <div>
                    <div class="hero-eyebrow">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—É—á–µ–Ω–∏—è</div>
                    <h1 style="margin: 0.35rem 0 0 0; font-size: 2.2rem; font-weight: 900;">–ö—É—Ä—Å—ã ¬∑ {{ student.name }}</h1>
                    <p style="margin: 0.65rem 0 0 0; color: var(--text-muted);">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äú–∫—É—Ä—Å ‚Üí –º–æ–¥—É–ª—å ‚Üí —É—Ä–æ–∫‚Äù –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å —É—á–µ–Ω–∏–∫–∞</p>
                </div>
                <div style="display:flex; gap: 0.75rem; flex-wrap: wrap;">
                    <a class="neo-button ghost" href="{{ url_for('students.student_profile', student_id=student.student_id) }}">
                        <i class="fas fa-arrow-left ui-icon ui-icon--sm"></i> –ü—Ä–æ—Ñ–∏–ª—å
                    </a>
                    {% if not current_user.is_student() and not current_user.is_parent() %}
                    <a class="neo-button accent" href="{{ url_for('courses.course_new', student_id=student.student_id) }}">
                        <i class="fas fa-plus ui-icon ui-icon--sm"></i> –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å
                    </a>
                    {% endif %}
                </div>
            </div>

            {% if courses and courses|length > 0 %}
            <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1rem;">
                {% for course in courses %}
                <a class="glass-panel" href="{{ url_for('courses.course_view', course_id=course.course_id) }}" style="text-decoration:none; padding: 1.25rem; display:flex; flex-direction: column; gap: 0.75rem;">
                    <div style="display:flex; justify-content: space-between; gap: 1rem; align-items: flex-start;">
                        <div style="min-width: 0;">
                            <div style="font-weight: 900; font-size: 1.15rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                {{ course.title }}
                            </div>
                            <div style="color: var(--text-muted); margin-top: 0.35rem; font-size: 0.95rem;">
                                {% if course.subject %}{{ course.subject }} ¬∑ {% endif %}
                                {% if course.status == 'archived' %}–ê—Ä—Ö–∏–≤{% else %}–ê–∫—Ç–∏–≤–µ–Ω{% endif %}
                            </div>
                        </div>
                        <span class="status-badge {% if course.status == 'archived' %}status-warning{% else %}status-success{% endif %}">
                            {% if course.status == 'archived' %}–ê—Ä—Ö–∏–≤{% else %}–ê–∫—Ç–∏–≤–µ–Ω{% endif %}
                        </span>
                    </div>

                    {% if course.description %}
                    <div style="color: var(--text-muted); line-height: 1.5; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">
                        {{ course.description }}
                    </div>
                    {% else %}
                    <div style="color: var(--text-muted); line-height: 1.5; opacity: 0.8;">
                        –ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è. –û—Ç–∫—Ä–æ–π –∫—É—Ä—Å –∏ –¥–æ–±–∞–≤—å –º–æ–¥—É–ª–∏/—É—Ä–æ–∫–∏.
                    </div>
                    {% endif %}

                    <div style="display:flex; gap: 0.5rem; flex-wrap: wrap; align-items: center; margin-top: 0.25rem;">
                        <span class="badge" style="background: rgba(255,255,255,0.05); border: 1px solid var(--stroke-1);">
                            <i class="fas fa-layer-group" style="margin-right: 0.35rem;"></i> –ö—É—Ä—Å
                        </span>
                        <span class="badge" style="background: rgba(255,255,255,0.05); border: 1px solid var(--stroke-1);">
                            <i class="far fa-clock" style="margin-right: 0.35rem;"></i> –û–±–Ω–æ–≤–ª—ë–Ω: {{ course.updated_at.strftime('%d.%m.%Y') if course.updated_at else '‚Äî' }}
                        </span>
                    </div>
                </a>
                {% endfor %}
            </div>
            {% else %}
            <div class="glass-panel" style="padding: 2rem; text-align:center;">
                <div style="font-size: 3rem; margin-bottom: 0.75rem;">üìö</div>
                <div style="font-size: 1.25rem; font-weight: 800;">–ü–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤</div>
                <div style="color: var(--text-muted); margin-top: 0.5rem;">
                    {% if not current_user.is_student() and not current_user.is_parent() %}
                        –°–æ–∑–¥–∞–π –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å –∏ —Ä–∞–∑–±–µ–π –µ–≥–æ –Ω–∞ –º–æ–¥—É–ª–∏ –∏ —É—Ä–æ–∫–∏.
                    {% else %}
                        –ü–æ–ø—Ä–æ—Å–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å –∏ –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª–∏.
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </main>
    </div>
</body>
</html>

