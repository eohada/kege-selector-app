<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if is_new %}Создать группу{% else %}Редактировать группу{% endif %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='modern_style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='toast.css') }}">
  {% include '_ux_enhancements.html' %}
  {% if csrf_token %}
  <meta name="csrf-token" content="{{ csrf_token() }}">
  {% endif %}
</head>
<body>
  <div class="app-shell">
    {% set active_page = 'groups' %}
    {% include '_primary_nav.html' %}

    <section class="glass-panel" style="margin-bottom: 1.25rem;">
      <p class="hero-eyebrow">группы</p>
      <h1 class="hero-title">{% if is_new %}Создать группу{% else %}Редактировать группу{% endif %}</h1>
    </section>

    <section class="glass-panel">
      <form method="POST" action="{% if is_new %}{{ url_for('groups.group_new') }}{% else %}{{ url_for('groups.group_edit', group_id=group.group_id) }}{% endif %}" data-no-ajax="1">
        {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}
        <div class="neo-field">
          <label class="neo-label">Название *</label>
          <input class="neo-input" name="title" required value="{{ group.title if group else '' }}" placeholder="Например: 10А (информатика)">
        </div>
        <div class="neo-field" style="margin-top: .9rem;">
          <label class="neo-label">Предмет</label>
          <input class="neo-input" name="subject" value="{{ group.subject if group else '' }}" placeholder="INFORMATICS_EGE_2026">
        </div>
        <div class="neo-field" style="margin-top: .9rem;">
          <label class="neo-label">Статус</label>
          {% set st = (group.status if group else 'active') %}
          <select class="neo-select" name="status">
            <option value="active" {% if st == 'active' %}selected{% endif %}>active</option>
            <option value="archived" {% if st == 'archived' %}selected{% endif %}>archived</option>
          </select>
        </div>
        <div class="neo-field" style="margin-top: .9rem;">
          <label class="neo-label">Описание</label>
          <textarea class="neo-input" rows="4" name="description" placeholder="Для кого группа, цели, примечания...">{{ group.description if group and group.description else '' }}</textarea>
        </div>
        <div style="display:flex; gap:.6rem; margin-top: 1rem; flex-wrap: wrap;">
          <button type="submit" class="neo-button accent">{% if is_new %}Создать{% else %}Сохранить{% endif %}</button>
          <a href="{% if is_new %}{{ url_for('groups.groups_list') }}{% else %}{{ url_for('groups.group_view', group_id=group.group_id) }}{% endif %}" class="neo-button outline">Отмена</a>
        </div>
      </form>
    </section>
  </div>
  <script src="{{ url_for('static', filename='toast.js') }}"></script>
</body>
</html>

