{# Единая шапка/навигация для всего проекта (премиум-минимализм) #}
{# Ожидаемые переменные: active_page (dashboard|schedule|generator|plans|reminders|templates|admin|None) #}
<header class="nav-primary">
    <div class="nav-brand">
        {% if current_user and current_user.is_authenticated %}
        <a href="{{ url_for('auth.user_profile') }}"
           class="user-profile-avatar {% if current_user.is_creator() %}creator{% endif %}"
           title="{{ current_user.username }} ({{ current_user.get_role_display() }})">
            {{ current_user.username[0].upper() }}
        </a>
        {% endif %}
        <a href="{{ url_for('main.index') }}" style="text-decoration: none; display: flex; align-items: center; gap: 1rem; color: inherit;">
            <div class="brand-mark">LOGO</div>
            <div class="brand-caption">Слот под фирменный знак</div>
        </a>
    </div>

    {% include '_mobile_menu.html' %}

    <nav class="nav-links">
        <a href="{{ url_for('main.dashboard') }}" class="nav-link {% if active_page == 'dashboard' %}active{% endif %}">
            <span class="nav-link-content">
                <img src="{{ url_for('static', filename='icons/students_white-no-bg-preview (carve.photos).png') }}" alt="Ученики" class="nav-link-icon">
                <span class="nav-link-label">Ученики</span>
            </span>
        </a>

        <a href="{{ url_for('schedule.schedule') }}" class="nav-link {% if active_page == 'schedule' %}active{% endif %}">
            <span class="nav-link-content">
                <img src="{{ url_for('static', filename='icons/schedule_white.png') }}" alt="Расписание" class="nav-link-icon">
                <span class="nav-link-label">Расписание</span>
            </span>
        </a>

        <a href="{{ url_for('kege_generator.kege_generator') }}" class="nav-link {% if active_page == 'generator' %}active{% endif %}">
            <span class="nav-link-content">
                <img src="{{ url_for('static', filename='icons/generator_white-no-bg-preview (carve.photos).png') }}" alt="Генератор" class="nav-link-icon">
                <span class="nav-link-label">Генератор</span>
            </span>
        </a>

        <a href="{{ url_for('main.update_plans') }}" class="nav-link {% if active_page == 'plans' %}active{% endif %}">
            <span class="nav-link-content">
                <img src="{{ url_for('static', filename='icons/notes_white-no-bg-preview (carve.photos).png') }}" alt="Планы" class="nav-link-icon">
                <span class="nav-link-label">Планы</span>
            </span>
        </a>

        <a href="{{ url_for('reminders.reminders_list') }}" class="nav-link {% if active_page == 'reminders' %}active{% endif %}">
            <span class="nav-link-content">
                <img src="{{ url_for('static', filename='icons/VREMYA.png') }}" alt="Напоминания" class="nav-link-icon">
                <span class="nav-link-label">Напоминания</span>
            </span>
        </a>

        <a href="{{ url_for('templates.templates_list') }}" class="nav-link {% if active_page == 'templates' %}active{% endif %}">
            <span class="nav-link-content">
                <img src="{{ url_for('static', filename='icons/SHABL.png') }}" alt="Шаблоны" class="nav-link-icon">
                <span class="nav-link-label">Шаблоны</span>
            </span>
        </a>

        {% if current_user and current_user.is_authenticated and current_user.is_creator() %}
        <a href="{{ url_for('admin.admin_panel') }}" class="nav-link {% if active_page == 'admin' %}active{% endif %}">
            <span class="nav-link-content">
                <img src="{{ url_for('static', filename='icons/icons8-интеграция-100.png') }}" alt="Админ" class="nav-link-icon">
                <span class="nav-link-label">Админ</span>
            </span>
        </a>
        {% endif %}
    </nav>
</header>


