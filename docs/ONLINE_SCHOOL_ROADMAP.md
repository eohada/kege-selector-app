# План развития платформы до "Идеальной онлайн-школы"

## 1. Анализ текущего состояния
Платформа имеет мощную базу (RBAC, управление пользователями, генерация задач), но страдает от фрагментации функционала.
- **ДЗ:** Существует две параллельные системы (старая через `LessonTask` и новая через `Assignment/Submission`). Новая система мощнее, но не интегрирована в UI студента.
- **Коммуникация:** Отсутствует прямой канал связи (чат, комментарии) внутри платформы.
- **Профиль:** Функционален, но "сух" (нет аватарок, статусов, социальных элементов).
- **Стабильность:** Периодические 500 ошибки из-за отсутствия проверок на `None` (особенно при работе со связями БД).

## 2. Дорожная карта (Roadmap)

### Этап 1: Стабильность и Ядро (Resilience & Core)
Цель: Исключить 500-е ошибки и обеспечить целостность данных.
- [ ] **Аудит 500:** Обернуть все критические маршруты в `try/except` с логированием и понятными сообщениями `flash`.
- [ ] **Обработка None:** В шаблонах Jinja добавить проверки `if object` перед доступом к свойствам (особенно `student.platform_id`, `lesson.date`).
- [ ] **Единая система ДЗ:** Полностью перевести интерфейс на использование `Assignment` и `Submission`. Скрыть старые кнопки генерации, если они дублируют функционал.

### Этап 2: Социализация и Профиль (Social & Profile)
Цель: Сделать платформу "живой" и персонализированной.
- [x] **Идентификаторы:** Внедрена система уникальных ID (100-999).
- [ ] **Аватарки:** Добавить возможность загрузки аватарок для всех ролей.
- [ ] **Био и Контакты:** Расширить профиль полями "О себе", Telegram, GitHub (для всех).
- [ ] **Статусы:** Визуальное отображение статуса ("На уроке", "Делает ДЗ", "Свободен").

### Этап 3: Учебный процесс (LMS Flow)
Цель: Обеспечить полный цикл обучения внутри платформы.
- [ ] **Сдача ДЗ:** Интерфейс для студента со списком заданий (`submissions_list`) и страницей выполнения (`submission_view`).
- [ ] **Файлы:** Добавить возможность прикреплять файлы (фото тетради, PDF) к ответу.
- [ ] **Комментарии:** Интерфейс для переписки учителя и ученика внутри конкретного задания.
- [ ] **Родительский контроль:** Дашборд для родителя с графиками успеваемости ребенка (без возможности редактирования).

### Этап 4: Геймификация (Gamification) - *Опционально*
- [ ] **Стрик (Streak):** Счетчик дней подряд, когда ученик заходил на платформу.
- [ ] **Бейджи:** Награды за "5 ДЗ подряд на 100 баллов".

## 3. Техническая реализация (Ближайшие шаги)

1.  **Профили:**
    *   Обновить модель `UserProfile` (добавить `avatar_url` если нет, или использовать Gravatar/S3).
    *   Обновить шаблоны `user_edit` и `student_profile` для отображения аватарок.
    *   Добавить загрузку изображений.

2.  **Интеграция ДЗ:**
    *   В `student_profile.html` добавить секцию "Активные задания" (из таблицы `Submissions`).
    *   Убедиться, что маршруты `assignments` доступны и работают без ошибок.

3.  **Родители:**
    *   Реализовать интерфейс "Пригласить родителя" (генерация ссылки или кода).
    *   Настроить `Parent Dashboard` на чтение данных из `Submission`.

---
*Документ создан: 2024-06-XX*
